package ats.algo.paramfindproblemanalysis;


import ats.algo.algomanager.AlgoManagerSimpleTestBase;
import ats.algo.core.baseclasses.GenericMatchParams;
import ats.algo.core.baseclasses.MatchIncident;
import ats.algo.core.common.ElapsedTimeMatchIncident;
import ats.algo.core.common.ElapsedTimeMatchIncident.ElapsedTimeMatchIncidentType;
import ats.algo.core.common.SupportedSportType;
import ats.algo.core.common.TeamId;
import ats.algo.core.comparetomarket.MarketPricesList;
import ats.algo.sport.football.FootballMatchFormat;
import ats.algo.sport.football.FootballMatchIncident;
import ats.algo.sport.football.FootballMatchIncident.FootballMatchIncidentType;
import ats.core.util.json.JsonUtil;

public class ParamFindProblemTestWithJsonInput extends AlgoManagerSimpleTestBase {

    String matchformatStr =
                    "{\"FootballMatchFormat\":{\"matchFormatType\":\"FootballMatchFormat\",\"sportType\":\"SOCCER\",\"normalTimeMinutes\":90,\"extraTimeMinutes\":0,\"penaltiesPossible\":false,\"lastScore\":\"0:0\",\"matchLevel\":3,\"awayGoalDouble\":true,\"matchinSecondLeg\":false,\"matchTwoLegs\":false}}";
    String matchParamsStr =
                    "{\"GenericMatchParams\":{\"eventId\":4893014,\"requestId\":\"TIMER\",\"requestTime\":0,\"paramMap\":{\"eventTier\":{\"class\":\"TraderControl\",\"matchParameterType\":\"TRADER_CONTROL\",\"gaussian\":{\"mean\":3.0,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"NOT_SPECIFIED\",\"minAllowedParamValue\":1.0,\"maxAllowedParamValue\":7.0,\"displayAsPercentage\":false},\"priceSourceSelector\":{\"class\":\"TraderControl\",\"matchParameterType\":\"TRADER_CONTROL\",\"gaussian\":{\"mean\":7.0,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"NOT_SPECIFIED\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":15.0,\"displayAsPercentage\":false},\"goalTotal\":{\"class\":\"Standard\",\"matchParameterType\":\"BOTHCOMBINED\",\"gaussian\":{\"mean\":3.304,\"stdDevn\":0.22,\"bias\":0.0},\"marketGroup\":\"GOALS\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":20.0,\"displayAsPercentage\":false},\"goalSupremacy\":{\"class\":\"Standard\",\"matchParameterType\":\"BOTHDIFFERENCE\",\"gaussian\":{\"mean\":-1.562,\"stdDevn\":0.22,\"bias\":0.0},\"marketGroup\":\"GOALS\",\"minAllowedParamValue\":-5.0,\"maxAllowedParamValue\":5.0,\"displayAsPercentage\":false},\"homeLoseBoost\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":0.042,\"stdDevn\":0.05,\"bias\":0.0},\"marketGroup\":\"GOALS\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":2.0,\"displayAsPercentage\":false},\"awayLoseBoost\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":0.493,\"stdDevn\":0.05,\"bias\":0.0},\"marketGroup\":\"GOALS\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":2.0,\"displayAsPercentage\":false},\"cornerTotal\":{\"class\":\"Standard\",\"matchParameterType\":\"BOTHCOMBINED\",\"gaussian\":{\"mean\":10.0,\"stdDevn\":1.0,\"bias\":0.0},\"marketGroup\":\"CORNERS\",\"minAllowedParamValue\":5.0,\"maxAllowedParamValue\":50.0,\"displayAsPercentage\":false},\"cornerSupremacy\":{\"class\":\"Standard\",\"matchParameterType\":\"BOTHDIFFERENCE\",\"gaussian\":{\"mean\":1.0,\"stdDevn\":1.0,\"bias\":0.0},\"marketGroup\":\"CORNERS\",\"minAllowedParamValue\":-20.0,\"maxAllowedParamValue\":20.0,\"displayAsPercentage\":false},\"cardTotal\":{\"class\":\"Standard\",\"matchParameterType\":\"BOTHCOMBINED\",\"gaussian\":{\"mean\":40.0,\"stdDevn\":3.2,\"bias\":0.0},\"marketGroup\":\"BOOKINGS\",\"minAllowedParamValue\":10.0,\"maxAllowedParamValue\":100.0,\"displayAsPercentage\":false},\"cardSupremacy\":{\"class\":\"Standard\",\"matchParameterType\":\"BOTHDIFFERENCE\",\"gaussian\":{\"mean\":2.0,\"stdDevn\":3.2,\"bias\":0.0},\"marketGroup\":\"BOOKINGS\",\"minAllowedParamValue\":-30.0,\"maxAllowedParamValue\":30.0,\"displayAsPercentage\":false},\"redCardProb\":{\"class\":\"Standard\",\"matchParameterType\":\"BOTHCOMBINED\",\"gaussian\":{\"mean\":0.08,\"stdDevn\":0.008,\"bias\":0.0},\"marketGroup\":\"BOOKINGS\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":1.0,\"displayAsPercentage\":true},\"A.Player1\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player1\"},\"B.Player5\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player5\"},\"B.Player6\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player6\"},\"B.Player7\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player7\"},\"B.Player8\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player8\"},\"A.Player5\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player5\"},\"B.Player9\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player9\"},\"A.Player4\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player4\"},\"A.Player3\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player3\"},\"A.Player2\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player2\"},\"A.Player9\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player9\"},\"B.Player14\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player14\"},\"A.Player8\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player8\"},\"B.Player15\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player15\"},\"A.Player7\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player7\"},\"B.Player16\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player16\"},\"A.Player6\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player6\"},\"B.Player17\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player17\"},\"B.Player1\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player1\"},\"B.Player2\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player2\"},\"B.Player3\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player3\"},\"B.Player4\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player4\"},\"B.Player10\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player10\"},\"B.Player11\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player11\"},\"B.Player12\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player12\"},\"B.Player13\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"B.Player13\"},\"A.Player12\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player12\"},\"A.Player11\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player11\"},\"A.Player10\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player10\"},\"A.Player17\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player17\"},\"A.Player16\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player16\"},\"A.Player15\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player15\"},\"A.Player14\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player14\"},\"A.Player13\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":6.0,\"stdDevn\":0.6,\"bias\":0.0},\"marketGroup\":\"INDIVIDUAL\",\"minAllowedParamValue\":0.0,\"maxAllowedParamValue\":10.0,\"displayAsPercentage\":false,\"description\":\"A.Player13\"},\"B.5th kick\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":0.8,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"PENALTY\",\"minAllowedParamValue\":0.2,\"maxAllowedParamValue\":0.9,\"displayAsPercentage\":true},\"B.4th kick\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":0.725,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"PENALTY\",\"minAllowedParamValue\":0.2,\"maxAllowedParamValue\":0.9,\"displayAsPercentage\":true},\"A.3rd kick\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":0.793,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"PENALTY\",\"minAllowedParamValue\":0.2,\"maxAllowedParamValue\":0.9,\"displayAsPercentage\":true},\"A.4th kick\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":0.725,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"PENALTY\",\"minAllowedParamValue\":0.2,\"maxAllowedParamValue\":0.9,\"displayAsPercentage\":true},\"A.5th kick\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":0.8,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"PENALTY\",\"minAllowedParamValue\":0.2,\"maxAllowedParamValue\":0.9,\"displayAsPercentage\":true},\"B.2nd kick\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":0.817,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"PENALTY\",\"minAllowedParamValue\":0.2,\"maxAllowedParamValue\":0.9,\"displayAsPercentage\":true},\"A.2nd kick\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":0.817,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"PENALTY\",\"minAllowedParamValue\":0.2,\"maxAllowedParamValue\":0.9,\"displayAsPercentage\":true},\"B.1st kick\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":0.866,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"PENALTY\",\"minAllowedParamValue\":0.2,\"maxAllowedParamValue\":0.9,\"displayAsPercentage\":true},\"B.3rd kick\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":0.793,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"PENALTY\",\"minAllowedParamValue\":0.2,\"maxAllowedParamValue\":0.9,\"displayAsPercentage\":true},\"A.Sudden death kicks\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":0.643,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"PENALTY\",\"minAllowedParamValue\":0.2,\"maxAllowedParamValue\":0.9,\"displayAsPercentage\":true},\"B.Sudden death kicks\":{\"class\":\"Standard\",\"matchParameterType\":\"B\",\"gaussian\":{\"mean\":0.643,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"PENALTY\",\"minAllowedParamValue\":0.2,\"maxAllowedParamValue\":0.9,\"displayAsPercentage\":true},\"A.1st kick\":{\"class\":\"Standard\",\"matchParameterType\":\"A\",\"gaussian\":{\"mean\":0.866,\"stdDevn\":0.0,\"bias\":0.0},\"marketGroup\":\"PENALTY\",\"minAllowedParamValue\":0.2,\"maxAllowedParamValue\":0.9,\"displayAsPercentage\":true}},\"originatingClassName\":\"ats.algo.sport.football.FootballMatchParams\"}}";
    String marketPricesStr =
                    "{\"MarketPricesList\":{\"eventId\":0,\"requestId\":\"spf1497353924185\",\"generateDetailedParamFindLog\":false,\"marketPricesList\":{\"188Bet\":{\"marketPrices\":{\"FT:AXB_M\":{\"valid\":true,\"type\":\"FT:AXB\",\"marketDescription\":\"FT:AXB||M|GENERAL\",\"category\":\"GENERAL\",\"lineId\":\"\",\"selections\":{\"A\":6.4,\"B\":1.38,\"Draw\":4.55},\"sequenceId\":\"M\",\"marketWeight\":1.0}},\"sourceWeight\":1.0},\"Bet365\":{\"marketPrices\":{\"FT:AHCP_M\":{\"valid\":true,\"type\":\"FT:AHCP\",\"marketDescription\":\"FT:AHCP|1.25|M|GENERAL\",\"category\":\"GENERAL\",\"lineId\":\"1.25\",\"selections\":{\"AH\":1.9,\"BH\":1.95},\"sequenceId\":\"M\",\"marketWeight\":1.0},\"FT:AXB_M\":{\"valid\":true,\"type\":\"FT:AXB\",\"marketDescription\":\"FT:AXB||M|GENERAL\",\"category\":\"GENERAL\",\"lineId\":\"\",\"selections\":{\"A\":21.0,\"B\":1.091,\"Draw\":9.5},\"sequenceId\":\"M\",\"marketWeight\":1.0},\"FT:OU_M\":{\"valid\":true,\"type\":\"FT:OU\",\"marketDescription\":\"FT:OU|3.75|M|OVUN\",\"category\":\"OVUN\",\"lineId\":\"3.75\",\"selections\":{\"Over\":1.925,\"Under\":1.925},\"sequenceId\":\"M\",\"marketWeight\":1.0}},\"sourceWeight\":1.0},\"PINNACLE\":{\"marketPrices\":{\"FT:AHCP_M\":{\"valid\":true,\"type\":\"FT:AHCP\",\"marketDescription\":\"FT:AHCP|1.5|M|GENERAL\",\"category\":\"GENERAL\",\"lineId\":\"1.5\",\"selections\":{\"AH\":1.826,\"BH\":1.99},\"sequenceId\":\"M\",\"marketWeight\":1.0},\"FT:AXB_M\":{\"valid\":true,\"type\":\"FT:AXB\",\"marketDescription\":\"FT:AXB||M|GENERAL\",\"category\":\"GENERAL\",\"lineId\":\"\",\"selections\":{\"A\":9.22,\"B\":1.355,\"Draw\":5.16},\"sequenceId\":\"M\",\"marketWeight\":1.0},\"FT:OU_M\":{\"valid\":true,\"type\":\"FT:OU\",\"marketDescription\":\"FT:OU|3.0|M|OVUN\",\"category\":\"OVUN\",\"lineId\":\"3.0\",\"selections\":{\"Over\":1.892,\"Under\":1.952},\"sequenceId\":\"M\",\"marketWeight\":1.0}},\"sourceWeight\":1.0}}}}";


    long eventId = 123L;


    public void test() {
        FootballMatchFormat matchFormat = JsonUtil.unmarshalJson(matchformatStr, FootballMatchFormat.class);
        GenericMatchParams gMatchParams = JsonUtil.unmarshalJson(matchParamsStr, GenericMatchParams.class);
        MarketPricesList marketPricesList = JsonUtil.unmarshalJson(marketPricesStr, MarketPricesList.class);
        gMatchParams.setEventId(eventId);
        algoManager.onlyPublishMarketsFollowingParamChange(false);
        algoManager.handleNewEventCreation(SupportedSportType.SOCCER, eventId, matchFormat);
        algoManager.handleMatchIncident(elapsedTimeIncident(ElapsedTimeMatchIncidentType.SET_PERIOD_START, 0), true);
        algoManager.handleMatchIncident(goalIncident(450, TeamId.B), true);
        algoManager.handleSetMatchParams(gMatchParams);
        System.out.println(this.publishedMarkets.get("FT:AXB"));
        algoManager.handleSupplyMarketPrices(eventId, marketPricesList);
        System.out.println(this.publishedParamFinderResults);


    }

    private MatchIncident goalIncident(int secs, TeamId id) {
        FootballMatchIncident incident = new FootballMatchIncident(FootballMatchIncidentType.GOAL, 200, id);
        incident.setEventId(eventId);
        incident.setIncidentId("GOAL");
        return incident;
    }

    private MatchIncident elapsedTimeIncident(ElapsedTimeMatchIncidentType type, int secs) {
        ElapsedTimeMatchIncident incident = new ElapsedTimeMatchIncident(type, secs);
        incident.setEventId(eventId);
        incident.setIncidentId("PERIOD");
        return incident;
    }

    public static void main(String[] args) {
        ParamFindProblemTestWithJsonInput Test = new ParamFindProblemTestWithJsonInput();
        Test.test();
    }

}
